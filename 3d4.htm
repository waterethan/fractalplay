<html>
	<head>
		<title>3d Terrain</title>
		
		
	</head>
	<body>
		detail:<input type="number" id="detail" size='1' value="32" />
		<input type="button" onclick="rotationX(0.05);" value="<x" />
		<input type="button" onclick="rotationX(-0.05);" value="x>" />
		<input type="button" onclick="rotationY(0.05);" value="<y" />
		<input type="button" onclick="rotationY(-0.05);" value="y>" />
		<input type="button" onclick="rotationZ(0.05);" value="<z" />
		<input type="button" onclick="rotationZ(-0.05);" value="z>" />
		<input type="button" onclick="scale(10);" value="In" />
		<input type="button" onclick="scale(-10);" value="out" />
		<input type="button" onclick="generateLandscape();" value="Generate" />
		<div class="canvas">
			<div style="position: absolute;" >
				<canvas id="cv1" width="800" height="500"><h3>Sorry, your browser does not support the HTML5 Canvas object</h3></canvas>
			</div>
			
			
		</div>
		<script language="javascript" src="fractals.js" type="text/javascript"></script>
<script language="javascript" src="matrix.js" type="text/javascript"></script>
<script language="javascript" src="two.js" type="text/javascript"></script>
<script language="javascript" src="terrain.js" type="text/javascript"></script>
		<script>
var pi = Math.PI;
var angleX = 2;
var angleY = -4;
var angleZ = 1;
var step = 1;
var speed = 0;
var speed2 = 0;
var speed3 = 0;
var speed4 = 0;
var zoom = 1000;
var terrain = new Terrain(800,800,500);

function rotationX(amount)	{speed += amount;}
function rotationY(amount)	{speed2 += amount;}
function rotationZ(amount)	{speed3 += amount;}
function scale(amount) {speed4 += amount;}
			


function generateLandscape()
{ var detail = parseInt(document.getElementById('detail').value);
	terrain.generate(detail);
}



function init()
{
	generateLandscape();
	setInterval(draw, 50);
}

function draw()
{
	cv = document.getElementById('cv1');
	if (cv) {
  
		width = cv.width;
		height = cv.height;

		if (cv.getContext){
			
			ctx = cv.getContext('2d');
			ctx.fillStyle = 'rgb(0,0,0)';
			ctx.fillRect (0, 0, width, height);
			ctx.fillStyle = 'white';
			ctx.fillText(angleX+' '+angleY+' ' +angleZ,20,20);
			terrain.angleX = angleX;
			terrain.angleY = angleY;
			terrain.angleZ = angleZ;
			terrain.zoom = zoom;
			terrain.render();
			terrain.draw(ctx);
			
			// Rotate landscape
			angleX += speed;
			angleY += speed2;
			angleZ += speed3;
			zoom += speed4;
			//zAngle += speed;
			//z += speed;
			if (angleX > 2*Math.PI || angle < 0)
			{
				angleX -= 2*Math.PI;
			} 
		}
	}
}
init();













		</script>
	</body>
</html>



